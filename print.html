<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Remark Tutorial</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="quick-guide/index.html"><strong aria-hidden="true">1.</strong> Quick Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="quick-guide/command_handling.html"><strong aria-hidden="true">1.1.</strong> Command Handling</a></li><li class="chapter-item expanded "><a href="quick-guide/forms.html"><strong aria-hidden="true">1.2.</strong> Forms</a></li></ol></li><li class="chapter-item expanded "><a href="in-depth/index.html"><strong aria-hidden="true">2.</strong> In Depth</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="in-depth/installing.html"><strong aria-hidden="true">2.1.</strong> Installing</a></li><li class="chapter-item expanded "><a href="in-depth/commands.html"><strong aria-hidden="true">2.2.</strong> Commands</a></li><li class="chapter-item expanded "><a href="in-depth/forms.html"><strong aria-hidden="true">2.3.</strong> Forms</a></li><li class="chapter-item expanded "><a href="in-depth/command_args.html"><strong aria-hidden="true">2.4.</strong> Command Arg's</a></li><li class="chapter-item expanded "><a href="in-depth/command_guards.html"><strong aria-hidden="true">2.5.</strong> Command Guard's</a></li><li class="chapter-item expanded "><a href="in-depth/custom_form_elements.html"><strong aria-hidden="true">2.6.</strong> Custom Form Elements</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Remark Tutorial</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>For onlooking developers, Remark simplifies Command Handling and Forms through a declarative and asynchronous syntax. It is a virion that makes heavy uses of PHP 8's new attributes to provide simple, elegant solutions for usually boilerplate-heavy command handling. It tackles the async nature of PocketMine through await-generator, making complex forms easy.</p>
<p>For getting started check out the <a href="quick-guide/index.html">Quick Guide</a>!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-guide"><a class="header" href="#quick-guide">Quick Guide</a></h1>
<p>Get familiar with Remark, fast!</p>
<p>Start with learning <a href="quick-guide/command_handling.html">Command Handling</a> by building a plugin step-by-step.</p>
<p>Or skip straight to <a href="quick-guide/forms.html">Forms</a> if that's what you're looking for.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-handling"><a class="header" href="#command-handling">Command Handling</a></h1>
<p>Prerequisites:</p>
<ul>
<li>Basic knowledge of PHP</li>
</ul>
<h2 id="about-attributes"><a class="header" href="#about-attributes">About Attributes</a></h2>
<p>Skip to <a href="quick-guide/command_handling.html#your-first-command">Your First Command</a> if you already know PHP 8's attributes.</p>
<p>PHP 8 added attributes, markers that can be placed on classes or methods and later found by Remark through reflection.</p>
<pre><code class="language-php">#[Test(debug: false)]
public function myMethod(): void {}
</code></pre>
<p>PHP 8.1 attributes look a lot like comments. They start with <code>#[</code> and end with <code>]</code> and inside the brackets the name of attributes are placed. Attributes are really just classes, and inside you put parameters for their constructor. You have to make sure to import the attribute just like you would for a class.</p>
<p>You can have multiple attributes inside the same <code>#[]</code> structure.</p>
<pre><code class="language-php">#[Test(debug: false), Logging(level: 2)]
public function myMethod(): void {}
</code></pre>
<p>You can also omit the parameter names, to make the attributes more concise.</p>
<pre><code class="language-php">#[Test(false), Logging(2)]
public function myMethod(): void {}
</code></pre>
<h2 id="your-first-command"><a class="header" href="#your-first-command">Your First Command</a></h2>
<p>In Remark, you mark methods using attributes to describe how you want to take arguments from the command line.</p>
<pre><code class="language-php">use DiamondStrider1\Remark\Command\Cmd;
use DiamondStrider1\Remark\Command\CmdConfig;
use DiamondStrider1\Remark\Command\Arg\sender;
use DiamondStrider1\Remark\Command\Arg\text;
use DiamondStrider1\Remark\Command\Guard\permission;
use pocketmine\command\CommandSender;

#[CmdConfig(
    name: 'helloworld',
    description: 'Run my hello world command!',
    aliases: ['hw'],
    permission: 'plugin.helloworld.use'
)]
class MyCommand {
    #[Cmd('helloworld'), permission('plugin.helloworld.use')]
    #[sender(), text()]
    public function myFirstCommand(CommandSender $sender, string $text): void
    {
        $sender-&gt;sendMessage(&quot;§aHello Command Handling! - $text&quot;);
    }
}
</code></pre>
<p>This is a lot of code to tackle, but before going over it let's register our command so it can be used.</p>
<h2 id="registering-your-first-command"><a class="header" href="#registering-your-first-command">Registering Your First Command</a></h2>
<pre><code class="language-php">public function onEnable(): void
{
    Remark::command($this, new MyCommand());
    Remark::activate($this);
}
</code></pre>
<p><code>Remark::command()</code> adds one or more <code>BoundCommand</code>s that implement <code>PluginOwned</code>. <code>Remark::activate()</code> registers a listener that will add <code>TAB</code>-completion for players.</p>
<h2 id="the-breakdown"><a class="header" href="#the-breakdown">The Breakdown</a></h2>
<p>Let's go over everything in <code>MyCommand.php</code>.</p>
<h4 id="cmdconfig-attribute"><a class="header" href="#cmdconfig-attribute">CmdConfig Attribute</a></h4>
<pre><code class="language-php">#[CmdConfig( /* ... */ )]
</code></pre>
<p>CmdConfig customizes the underlying command that will ultimately be registered to PocketMine's CommandMap. Everything is pretty self-explanatory. <code>name</code> is the name of the command (i. e. <code>/command_name</code>).<code>permission</code> is set as the permission of the command, hiding the command from those who have insufficient permissions. <strong>IT DOES NOT</strong>, however, stop people from running the command by itself. We will get into that soon.</p>
<h4 id="cmd-and-permission"><a class="header" href="#cmd-and-permission">Cmd and permission</a></h4>
<pre><code class="language-php">#[Cmd('helloworld'), permission('plugin.helloworld.use')]
</code></pre>
<p>This line uses two attributes at once. The method these attributes are placed on are called a HandlerMethod. A method simply has to be marked by <code>Cmd</code> to become a HandlerMethod.</p>
<h4 id="cmd-attribute"><a class="header" href="#cmd-attribute">Cmd Attribute</a></h4>
<p>The <code>Cmd</code> is passed the name of the command. You can change the command to a subcommand by adding a comma followed by another string. For example, <code>#[Cmd('cmd', 'subcmd')]</code> would bind the method to the subcommand at <code>/cmd subcmd</code>. The command or subcommand chosen must be unique, meaning there is one HandlerMethod per command/subcommand.</p>
<h4 id="the-permission-guard"><a class="header" href="#the-permission-guard">The permission Guard</a></h4>
<p>The <code>permission</code> is something Remark calls a <code>Guard</code>. <code>Guard</code>s prevent unauthorized access to commands by ensuring that certain requirements are met. If the <code>permission</code> guard fails, it will send a generic not-enough-permissions error to the command sender. The HandlerMethod only runs if all <code>Guard</code>s attached to it succeed. Unlike the <code>permission</code> property of <code>CmdConfig</code>, this guard actually enforces that the command sender has permission to using the command. More permissions can be added by adding a comma and another string, ex: <code>permission('perm1', 'perm2')</code>.</p>
<h4 id="args"><a class="header" href="#args">Args</a></h4>
<pre><code class="language-php">#[sender(), text()]
</code></pre>
<p>Ranked's <code>Arg</code>s have many responsibilities.</p>
<ul>
<li>Extracting data from command line arguments</li>
<li>Validation</li>
<li>Converting from string to a useful type (i. e. int)</li>
</ul>
<p>It's required that for every <code>Arg</code> of a HandlerMethod that there is a corresponding parameter of the correct type. That parameter will be given the value extracted by the Arg whenever the command is run.</p>
<h4 id="the-sender-arg"><a class="header" href="#the-sender-arg">The sender() Arg</a></h4>
<p>The <code>sender()</code> Arg requires that it's parameter is of type <code>CommandSender</code> or <code>Player</code>. It doesn't actually take any arguments from the command line, but simply supplies the command sender performing an <code>instanceof</code> check if needed.</p>
<h4 id="the-text-arg"><a class="header" href="#the-text-arg">The text() Arg</a></h4>
<p>The <code>text()</code> Arg requires that it's parameter is of type <code>string</code>, <code>?string</code> or <code>array</code> depending on the arguments passed to it. In this case the type of the parameter must be <code>string</code>. By default <code>text()</code> takes a single string from the command line arguments, and errors if none was given.</p>
<h1 id="asynchronous-commands"><a class="header" href="#asynchronous-commands">Asynchronous Commands</a></h1>
<p>A key aspect of Remark is it's asynchronous approach to UI. This is important because of how complex asynchronous programming will become if not given care. AwaitGenerator is a virion that allows async/await style programming through Generators and their pause/resume functions. It's not required you use AwaitGenerator, but it is recommended and supported by Remark.</p>
<p>Here is the example extended to use Remark's first-class support of AwaitGenerator.</p>
<pre><code class="language-php">#[Cmd('helloworld'), permission('plugin.helloworld.use')]
#[sender(), text()]
public function myFirstCommand(CommandSender $sender, string $text): Generator
{
    $sender-&gt;sendMessage(&quot;§aHello Command Handling! - $text&quot;);
    $response = yield from AsyncApi::fetch($text);
    if ($sender instanceof Player &amp;&amp; !$sender-&gt;isConnected()) {
        return;
    }
    $sender-&gt;sendMessage(&quot;Got Response: $response&quot;);
}
</code></pre>
<p>The return type of the function is now <code>Generator</code>, and <code>yield from</code> is used to call other AwaitGenerator functions. Remember to check that the player is still connected after doing any asynchronous logic.</p>
<p>If you got all of that, let's move on to <a href="quick-guide/forms.html">forms</a>!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="forms"><a class="header" href="#forms">Forms</a></h1>
<p>Prerequisites:</p>
<ul>
<li>Basic knowledge of PHP</li>
<li>Basic knowledge of PHP 8's attributes</li>
</ul>
<p>The main way to send forms to players is through Remark's <code>DiamondStrider1\Remark\Form\Forms</code> class. It contains the methods <code>modal2then()</code>, <code>modal2gen()</code>, <code>menu2then()</code>, <code>menu2gen()</code>, <code>custom2then()</code>, and <code>custom2gen()</code>. Methods ending in <code>gen</code> return an AwaitGenerator compatible generator that sends the form of its type and returns it's result. Methods ending in <code>then</code> exist in case AwaitGenerator isn't available, and return Thenable's that are resolved with the form's result.</p>
<p>Let's continue the example from <a href="quick-guide/command_handling.html">Command Handling</a>.</p>
<pre><code class="language-php">#[Cmd('helloworld'), permission('plugin.helloworld.use')]
#[sender(), text()]
public function myFirstCommand(CommandSender $sender, string $text): Generator
{
    $sender-&gt;sendMessage(&quot;§aHello Command Handling! - $text&quot;);
    $response = yield from AsyncApi::fetch($text);
    if ($sender instanceof Player &amp;&amp; !$sender-&gt;isConnected()) {
        return;
    }
    $sender-&gt;sendMessage(&quot;Got Response: $response&quot;);
}
</code></pre>
<p>For those not familiar with Remark's <a href="quick-guide/command_handling.html">command handling</a>, the method <code>myFirstCommand()</code> will be ran whenever a player (or the console) runs <code>/helloworld</code> and has the permission <code>plugin.helloworld.use</code>.</p>
<h2 id="modalform"><a class="header" href="#modalform">ModalForm</a></h2>
<p>Starting off simple, we will send the player a yes/no modal form. Modal forms cannot be closed out of, if you try to hit <code>ESC</code> the game doesn't acts as if you had pressed the no button.</p>
<pre><code class="language-php">/** @var bool $choice */
$choice = yield from Forms::modal2gen(
    $sender,
    'What is your favorite ice cream?',
    'Pick from these ice cream flavors.',
);
$choice = match ($choice) {
    true =&gt; '§aYes',
    false =&gt; '§cNo',
};
$sender-&gt;sendMessage(&quot;You said {$choice}§r.&quot;);
</code></pre>
<p>Notice we don't have to check if the player's online because when a PocketMine guarantees the player is still connected when a form is submitted.</p>
<h2 id="menuform"><a class="header" href="#menuform">MenuForm</a></h2>
<p>Let's now give the player a menu form with options to choose from.</p>
<pre><code class="language-php">/** @var ?int $choice */
$choice = yield from Forms::menu2gen(
    $sender,
    'What is your favorite ice cream?',
    'Pick from these ice cream flavors.',
    [
        new MenuFormButton('Vanilla'),
        new MenuFormButton('Blueberry'),
        new MenuFormButton('Lime'),
    ]
);
if (null !== $choice) {
    $choice = ['vanilla', 'blueberry', 'lime'][$choice];
    $sender-&gt;sendMessage(&quot;You chose §g{$choice}§r.&quot;);
}
</code></pre>
<p>A MenuFormButton can also have an attached MenuFormImage like so.</p>
<pre><code class="language-php">new MenuFormButton('My Button', new MenuFormImage(type: 'url', location: 'https://my.image.com/image'))
new MenuFormButton('My Button', new MenuFormImage(type: 'path', location: 'textures/blocks/dirt.png'))
</code></pre>
<h2 id="customform"><a class="header" href="#customform">CustomForm</a></h2>
<p>Now for the most complex type of form. A custom form sends a list of elements for the player to fill out and a submit button to press when the player is finished. Remark gives you two ways to create a custom form. First we will start with the <code>custom2gen()</code>/<code>custom2then()</code> method.</p>
<pre><code class="language-php">/** @var array&lt;int, mixed&gt; $response */
$response = yield from Forms::custom2gen(
    $sender,
    'What is your favorite ice cream?',
    [
        new Label('Type a valid ice cream flavor!'),
        new Input('Ice Cream Flavor', placeholder: 'Vanilla'),
    ]
);
$sender-&gt;sendMessage(&quot;You said {$response[1]}§r.&quot;);
</code></pre>
<p>Using this method of sending custom forms, you have to index the response data with the index of the element. Remark already handles the validation for you.</p>
<p>Another way to make custom forms is through attributes.</p>
<pre><code class="language-php">use DiamondStrider1\Remark\Form\CustomFormElement\Label;
use DiamondStrider1\Remark\Form\CustomFormElement\Input;
use DiamondStrider1\Remark\Form\CustomFormResultTrait;

final class MySurveyForm
{
    use CustomFormResultTrait;

    #[Label('Type a valid ice cream flavor!')]
    #[Input('Ice Cream Flavor', placeholder: 'Vanilla')]
    public string $name;
}
</code></pre>
<pre><code class="language-php">/** @var MySurveyForm $formResult */
$formResult = yield from MySurveyForm::custom2gen(
    $sender, 'What is your favorite ice cream?'
);
$sender-&gt;sendMessage(&quot;You said {$formResult-&gt;name}§r.&quot;);
</code></pre>
<p>The CustomFormResultTrait adds the static functions <code>custom2gen()</code> and <code>custom2then()</code> that take a player and a title for the form. It's recommended that you mark form fields as public so they are easily accessible.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="in-depth"><a class="header" href="#in-depth">In Depth</a></h1>
<p>For installing for development and production check <a href="in-depth/installing.html">Installing</a>.</p>
<p>Documentation can be found for <a href="in-depth/command_args.html">Command Args</a>, <a href="in-depth/command_guards.html">Command Guards</a>, and <a href="in-depth/custom_form_elements.html">Custom Form Elements</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing"><a class="header" href="#installing">Installing</a></h1>
<p>Setting up your plugin to use Remark is quite easy!</p>
<p>It's advised that during development <a href="in-depth/installing.html#using-devirion">DEVirion</a> is used and when the plugin is ready production that this library is either installed <a href="in-depth/installing.html#installing-with-poggit">by Poggit</a> or installed <a href="in-depth/installing.html#manually-installing-into-a-plugin-phar">by hand</a>.</p>
<h2 id="using-devirion"><a class="header" href="#using-devirion">Using DEVirion</a></h2>
<p>DEVirion allows your plugin to use Remark.</p>
<ol>
<li>Install <code>Remark.phar</code> from this project's <a href="https://github.com/Swift-Strider/Remark/releases/">Github Releases</a>.</li>
<li>Place <code>Remark.phar</code> into your server's <code>virions</code> folder, which is next to the <code>plugins</code> folder.</li>
<li>If not already downloaded, get DEVirion from <a href="https://poggit.pmmp.io/p/DEVirion/">Poggit</a>.</li>
</ol>
<h2 id="installing-with-poggit"><a class="header" href="#installing-with-poggit">Installing with Poggit</a></h2>
<p>Plugins that are built on poggit and use virions should declare there dependencies in <code>.poggit.yml</code>. To use Remark add an entry like this.</p>
<pre><code class="language-yml">projects:
  my-pugin-project:
    path: &quot;&quot;
    libs:
      - src: Swift-Strider/Remark/Remark
        version: ^3.3.0
        epitope: .random
</code></pre>
<h2 id="manually-installing-into-a-plugin-phar"><a class="header" href="#manually-installing-into-a-plugin-phar">Manually Installing into a Plugin Phar</a></h2>
<p>Install <code>Remark.phar</code> from this project's <a href="https://github.com/Swift-Strider/Remark/releases/">Github Releases</a>.</p>
<p>If you haven't already, build your plugin into a phar file. This example script assumes you're in your plugin's directory and that the files/directories <code>plugin.yml</code>, <code>src</code>, and <code>resources</code> exist. The following works on both <code>Windows 10 (Powershell)</code> and <code>Ubuntu</code>.</p>
<pre><code class="language-sh">wget https://raw.githubusercontent.com/pmmp/DevTools/master/src/ConsoleScript.php -O ConsoleScript.php
php -dphar.readonly=0 ConsoleScript.php --make src,resources,plugin.yml --relative . --out plugin.phar
</code></pre>
<p>Next you will &quot;infect&quot; your plugin's <code>.phar</code> file, embedding the Remark library inside of your plugin.</p>
<pre><code class="language-sh">php -dphar.readonly=0 Remark.phar plugin.phar
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="in-depth--commands"><a class="header" href="#in-depth--commands">In Depth | Commands</a></h1>
<p><code>Remark::command()</code> is used to bind the HandlerMethods of an object to a CommandMap. By default, <code>Remark::command()</code> uses the CommandMap attached to the running PocketMine Server. Under-the-hood, a new <code>BoundCommand</code> is made for every <code>CmdConfig</code>, and they implement <code>PluginOwned</code> returning the plugin passed to <code>Remark::command()</code>.</p>
<p><code>Remark::activate()</code> registers a listener which will add <code>TAB</code>-completion for players.</p>
<h2 id="cmdconfig"><a class="header" href="#cmdconfig">CmdConfig</a></h2>
<p>Configures the commands of a handler object.</p>
<pre><code class="language-php">string $name,
string $description,
array $aliases = [],
?string $permission = null,
</code></pre>
<ul>
<li>name - The name of the underlying command</li>
<li>description - The description of the command</li>
<li>aliases - The aliases of the command</li>
<li>permission - If set, one or more permissions separated by <code>;</code></li>
</ul>
<h2 id="cmd"><a class="header" href="#cmd">Cmd</a></h2>
<p>Marks a method as a handler for a command. You may bind a HandlerMethod to multiple commands by repeating this attribute.</p>
<pre><code class="language-php">string $name,
string ...$subNames,
</code></pre>
<ul>
<li>name - The name of the command to attach this HandlerMethod to</li>
<li>subNames - Zero or more subcommand names</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="in-depth--forms"><a class="header" href="#in-depth--forms">In Depth | Forms</a></h1>
<p>The <code>DiamondStrider1\Remark\Form\Forms</code> class holds static methods for creating forms. They are <code>modal2then()</code>, <code>modal2gen()</code>, <code>menu2then()</code>, <code>menu2gen()</code>, <code>custom2then()</code>, and <code>custom2gen()</code>. The <code>*2gen()</code> methods return generators to be used with await-generator, and the <code>*2then()</code> methods return <code>Thenable</code> a type defined by Remark.</p>
<h1 id="thenable"><a class="header" href="#thenable">Thenable</a></h1>
<p>A <code>Thenable</code> is much like a promise. One may call <code>$thenable-&gt;then($onResolve, $onReject)</code>. If you omit <code>$onReject</code> Remark will throw an <code>UnhandledAsyncException</code> if the <code>Thenable</code> is rejected.</p>
<h1 id="modal-form"><a class="header" href="#modal-form">Modal Form</a></h1>
<p>Use either <code>Forms::modal2then()</code> or <code>Forms::modal2gen()</code>. Resolves with a boolean, <code>true</code> if the yes button was hit, <code>false</code> if the no button was.</p>
<pre><code class="language-php">Player $player,
string $title,
string $content,
string $yesText = 'gui.yes',
string $noText = 'gui.no',
</code></pre>
<h1 id="menu-form"><a class="header" href="#menu-form">Menu Form</a></h1>
<p>Use either <code>Forms::menu2then()</code> or <code>Forms::menu2gen()</code>. Resolves with an integer, the index of the button the player chose.</p>
<pre><code class="language-php">Player $player,
string $title,
string $content,
array $buttons,
</code></pre>
<ul>
<li>buttons - A list of <code>MenuFormButton</code>s</li>
</ul>
<h2 id="menuformbutton"><a class="header" href="#menuformbutton">MenuFormButton</a></h2>
<p>A button for a menu form.</p>
<pre><code class="language-php">string $text,
?MenuFormImage $image = null,
</code></pre>
<ul>
<li>text - The text of the button</li>
<li>image - An optional image to display</li>
</ul>
<h2 id="menuformimage"><a class="header" href="#menuformimage">MenuFormImage</a></h2>
<p>An image that can be to present on a menu form.</p>
<pre><code class="language-php">string $type,
string $location,
</code></pre>
<ul>
<li>type - Either 'url' or 'path'.</li>
<li>location - The location of the image</li>
</ul>
<p>If the image's type is <code>url</code>, Minecraft will
fetch the image from online, and it may take
some time to load. If the type is <code>path</code>,
Minecraft will instantly load the image from
the resource pack.</p>
<p>On Minecraft Windows 10, <code>url</code> images may not
show until ALT-TAB'ing out of then back into Minecraft.</p>
<p>An example location of a <code>path</code> type image is
&quot;textures/block/dirt.png&quot; without the leading
slash.</p>
<h1 id="custom-form"><a class="header" href="#custom-form">Custom Form</a></h1>
<p>You may use <code>Forms::custom2then()</code>/<code>Forms::custom2gen()</code> or <code>CustomFormResultTrait</code>.</p>
<h2 id="custom-form-static-functions"><a class="header" href="#custom-form-static-functions">Custom Form, static functions</a></h2>
<p>Returns an array with the indexes of elements mapped to the values of the player's response.</p>
<pre><code class="language-php">Player $player,
string $title,
array $elements,
</code></pre>
<ul>
<li>elements - A list of <code>CustomFormElement</code>s</li>
</ul>
<h2 id="custom-form-customformresulttrait"><a class="header" href="#custom-form-customformresulttrait">Custom Form, CustomFormResultTrait</a></h2>
<p>A class that uses this trait will have the static methods <code>custom2gen()</code> and <code>custom2then()</code> added which return a new instance of the class instead of an array.</p>
<p>A class using CustomFormResultTrait must meet the following
requirements:</p>
<ul>
<li>Must not be abstract</li>
<li>Every property to be filled in...
<ul>
<li>May be marked with any number of Label attributes</li>
<li>Must be marked with at most one CustomFormElement that isn't Label</li>
</ul>
</li>
</ul>
<p>Properties are filled in according to the non-Label attribute
attached to them, or ignored if only Labels are attached to them.</p>
<p>All properties without CustomFormElement attributes are ignored.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-args"><a class="header" href="#command-args">Command Args</a></h1>
<p>An <code>Arg</code> provides a value to its corresponding parameter of a HandlerMethod. The number of <code>Args</code> in a HandlerMethod must be equal to its number of parameters. An <code>Arg</code> may extract its value from the arguments given when the command is run, or it may get its value from another source.</p>
<h2 id="sender"><a class="header" href="#sender">sender</a></h2>
<p>Extracts the <code>CommandSender</code>. If its corresponding parameter has the type <code>Player</code> it will do an instance-of check automatically. Otherwise the type of the parameter must be CommandSender.</p>
<p><em><code>sender()</code> does not take any arguments.</em></p>
<h2 id="player_arg"><a class="header" href="#player_arg">player_arg</a></h2>
<p>Extracts a <code>Player</code> using the name provided by a command argument.</p>
<pre><code class="language-php">bool $exact = false,
</code></pre>
<ul>
<li>exact - whether to not match by prefix</li>
</ul>
<h2 id="text"><a class="header" href="#text">text</a></h2>
<p>Extracts one or more strings from the command arguments. Depending on the parameters given to this Arg, the corresponding parameter must have a type of <code>string</code>, <code>?string</code>, or <code>array</code>.</p>
<pre><code class="language-php">int $count = 1,
bool $require = true,
</code></pre>
<ul>
<li>count - number of arguments to take</li>
<li>require - wether to fail if the number
of arguments remaining is less than count</li>
</ul>
<h2 id="remaining"><a class="header" href="#remaining">remaining</a></h2>
<p>Extracts the remaining strings from the command arguments.</p>
<p><em><code>remaining()</code> does not take any arguments.</em></p>
<h2 id="enum"><a class="header" href="#enum">enum</a></h2>
<p>Extracts a string that must be in an immutable set of predefined strings.</p>
<pre><code class="language-php">string $name,
string $choice,
string ...$otherChoices,
</code></pre>
<ul>
<li>name - the enum's name, in-game it will show
as a command hint (i. e. <code>&lt;paramName: name&gt;</code>)</li>
<li>choice - A possible choice</li>
<li>otherChoices - Other possible choices</li>
</ul>
<h2 id="bool_arg"><a class="header" href="#bool_arg">bool_arg</a></h2>
<p>Extracts a true / false boolean.
Valid command arguments for both choices are:</p>
<ul>
<li>true: &quot;true&quot;, &quot;on&quot;, and &quot;yes&quot;</li>
<li>false: &quot;false&quot;, &quot;off&quot;, and &quot;no&quot;</li>
</ul>
<p><em><code>bool_arg()</code> does not take any arguments.</em></p>
<h2 id="int_arg"><a class="header" href="#int_arg">int_arg</a></h2>
<p>Extracts an integer.</p>
<p><em><code>int_arg()</code> does not take any arguments.</em></p>
<h2 id="float_arg"><a class="header" href="#float_arg">float_arg</a></h2>
<p>Extracts a float.</p>
<p><em><code>float_arg()</code> does not take any arguments.</em></p>
<h2 id="vector_arg"><a class="header" href="#vector_arg">vector_arg</a></h2>
<p>Extracts either a Vector3 or RelativeVector3 depending on the type of it's corresponding parameter.</p>
<p>If your parameter has the type RelativeVector3, you can then call <code>$relativeVector-&gt;relativeTo($vector)</code> to get a real Vector3.</p>
<p><em><code>vector_arg()</code> does not take any arguments.</em></p>
<h2 id="json_arg"><a class="header" href="#json_arg">json_arg</a></h2>
<p>Extracts a string <strong>WITHOUT</strong> validating that it's proper json. This is more of a marker, telling the player's client that JSON is needed. You <strong>MUST</strong> verify that the JSON is valid, yourself.</p>
<p><em><code>json_arg()</code> does not take any arguments.</em></p>
<h2 id="command_arg"><a class="header" href="#command_arg">command_arg</a></h2>
<p>Extracts a string <strong>WITHOUT</strong> validating that it's the name of a command. This is more of a marker, telling the player's client that a command name is needed. You <strong>MUST</strong> verify that the command name is valid, yourself.</p>
<p><em><code>command_arg()</code> does not take any arguments.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-guards"><a class="header" href="#command-guards">Command Guards</a></h1>
<p>A <code>Guard</code> prevents a HandlerMethod from being ran when a requirement isn't satisfied. I. e. the command sender not having permission.</p>
<h2 id="permission"><a class="header" href="#permission">permission</a></h2>
<p>Requires that the <code>CommandSender</code> has all of the permissions passed in.</p>
<pre><code class="language-php">string $permission,
string ...$otherPermissions,
</code></pre>
<ul>
<li>permission - One required permission</li>
<li>otherPermissions - Other required permissions</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-form-elements"><a class="header" href="#custom-form-elements">Custom Form Elements</a></h1>
<p><code>Dropdown</code>, <code>Input</code>, <code>Label</code>, <code>Slider</code>, <code>StepSlider</code>, and <code>Toggle</code> are found in the <code>DiamondStrider1\Remark\Forms\CustomFormElement</code> namespace and all implement <code>CustomFormElement</code>. They may be used as normal classes (<code>new Label('Some Text')</code>) or as attributes (<code>#[Label('Some Text')]</code>).</p>
<p>Information on creating custom forms can be found <a href="in-depth/forms.html#custom-form">here</a>.</p>
<h2 id="dropdown"><a class="header" href="#dropdown">Dropdown</a></h2>
<p>Returns an integer which is the index of the choice the player selected.</p>
<pre><code class="language-php">string $text,
array $options,
int $defaultOption = 0,
bool $allowDefault = true,
</code></pre>
<ul>
<li>allowDefault - whether the player may skip filling out a dropdown when the Dropdown's default value is -1</li>
</ul>
<h2 id="input"><a class="header" href="#input">Input</a></h2>
<p>Returns a string that the player entered.</p>
<pre><code class="language-php">string $text,
string $placeholder = '',
string $default = '',
</code></pre>
<h2 id="label"><a class="header" href="#label">Label</a></h2>
<p>Does not return anything, but it does place text at its location.</p>
<pre><code class="language-php">string $text
</code></pre>
<h2 id="slider"><a class="header" href="#slider">Slider</a></h2>
<p>Returns a float in within the range [min, max]. It <strong>DOES NOT</strong> validate the step, however, so that responsibility is left to the developer.</p>
<pre><code class="language-php">string $text,
float $min,
float $max,
float $step = 1.0,
?float $default = null,
</code></pre>
<h2 id="stepslider"><a class="header" href="#stepslider">StepSlider</a></h2>
<p>Returns an integer, the index of the step the player chose. Visually, looks like a Slider but the player chooses one of the steps.</p>
<pre><code class="language-php">string $text,
array $steps,
int $defaultOption = 0,
</code></pre>
<ul>
<li>steps - list of strings to choose from</li>
</ul>
<h2 id="toggle"><a class="header" href="#toggle">Toggle</a></h2>
<p>Returns a boolean. Creates a switch that the player can toggle.</p>
<pre><code class="language-php">string $text,
bool $default = false,
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
